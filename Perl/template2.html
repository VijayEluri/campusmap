<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/2000/REC-xhtml1-20000126/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>UCSD Map</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />

<style type="text/css">
	#left {
		float: left;
		width: 70%;
	}

	#right {
		float: left;
		width: 20%;
	} 

	/* 
	 * Buttons for controling zoom and direction...position is abosolutely
	 * relative to map :)
	 */
  	 #buttons {
		position: absolute;
		top: 20px;
		left: 10px;
		float: left;
		width: 70px;
		text-align: center;
	}

	#image {

	}

	#top {
	    	height: 80px;
	}

	#logo{
	    	height: 100%;
		float: left;
		width: 20%;
		border-right: 10px solid white;
	}

	#divFrom{
	    	border-top: 13px solid white;
		float: center;
	}

	#divEnd{
	    	border-top: 13px solid white;
		width: 40%;
		float: right;
	}

	#mapBox{
	    	position: relative;
		border-top: 40px solid #333399;
	}
	/* The area of the display...text and misc information */
	#bottom{
		display: block;
		float: left;
		font-size: 75%;
		width: 100%;
		text-align: center;
	}

	/* the main map and thumbnail images, since they're not <img> tags,
	 * must have their sizes set in CSS */
	#map{
		width: <TMPL_VAR NAME=VIEW_WIDTH>px;
		height: <TMPL_VAR NAME=VIEW_HEIGHT>px;
		border: 1px solid black;
	}

	#thumb{
		width: <TMPL_VAR NAME=THUMB_WIDTH>px;
		height: <TMPL_VAR NAME=THUMB_HEIGHT>px;
		border: 0px solid black;
	}
</style>

</head>
<body>

<div id="left">
	<div id="top">
		<div id="logo">
			<img src="../../ucsdmap/ucsdmaplogo_small.png" width="151" height="77" alt="ucsdmapLogo" />
		</div>

		<form method="get" action="<TMPL_VAR NAME=SELF>" target="_self" name="main">
			<!-- remember zoom level and window size when searching --> 
			<input type="hidden" name="size" value="<TMPL_VAR NAME=SIZE>" />
			<input type="hidden" name="mpm" value="<TMPL_VAR NAME=MPM>" />

		<div id="divEnd">
			<label for="to">End:</label>
			<input id="to" type="text" name="to" value="<TMPL_VAR NAME=TXT_DST>" />
			<br />
			<select name="to_selector"
				onchange="main.to.value = this.form.to_selector.value">
				<option value="">(None)</option>
				<TMPL_LOOP NAME=LOCATIONS>
					<option value="<TMPL_VAR NAME=NAME>" <TMPL_IF NAME=SELECTED_TO>selected="selected"</TMPL_IF>><TMPL_VAR NAME=NAME></option>
				</TMPL_LOOP>
			</select>
			<input type="submit" name="submit" value="Submit" />
		</div>

		<div id="divFrom">
			<label for="from">Start:</label>
			<input id="from" type="text" name="from" value="<TMPL_VAR NAME=TXT_SRC>" />
			<br />
			<select name="from_selector"
				onchange="main.from.value = this.form.from_selector.value">
				<option value="">(None)</option>
				<TMPL_LOOP NAME=LOCATIONS>
					<option value="<TMPL_VAR NAME=NAME>" <TMPL_IF NAME=SELECTED_FROM>selected="selected"</TMPL_IF>><TMPL_VAR NAME=NAME></option>
				</TMPL_LOOP>
			</select>
		</div>

		</form>

	</div>


        <div id="mapBox">
		<div id="buttons">
			<table border="0" cellspacing="1" cellpadding="1" align="center">
				<!-- this is the directional control pad -->
				<tr>
					<td>&nbsp;</td>
					<td>
						<a href="<TMPL_VAR NAME=UP_URL>"><img src="<TMPL_VAR NAME=IMG_DIR>/up-arr.png" width="20" height="20" border="0" alt="Up" /></a>
					</td>
					<td>&nbsp;</td>
				</tr>
				<tr>
					<td>
						<a href="<TMPL_VAR NAME=LEFT_URL>"><img src="<TMPL_VAR NAME=IMG_DIR>/left-arr.png" width="20" height="20" border="0" alt="Left" /></a>
					</td>
					<td>
						<a href="<TMPL_VAR NAME=RECENTER_URL>">
						<img src="<TMPL_VAR NAME=IMG_DIR>/circle.png" width="20" height="20" border="0" alt="Re-center" />
						</a>
					</td>
					<td>
						<a href="<TMPL_VAR NAME=RIGHT_URL>"><img src="<TMPL_VAR NAME=IMG_DIR>/right-arr.png" width="20" height="20" border="0" alt="Right" /></a>
					</td>
				</tr>
				<tr>
					<td>&nbsp;</td>
					<td>
						<a href="<TMPL_VAR NAME=DOWN_URL>"><img src="<TMPL_VAR NAME=IMG_DIR>/down-arr.png" width="20" height="20" border="0" alt="Down" /></a>
					</td>
					<td>&nbsp;</td>
				</tr>
				<tr>
					<td>&nbsp;</td>
				</tr>

				<!-- this is the zoom widget -->
				<tr>
					<td colspan="3">
						<a href="<TMPL_VAR NAME=ZOOM_IN_URL>"><img src="<TMPL_VAR NAME=IMG_DIR>/zoom-plus.png" width="30" height="30" border="0" alt="Zoom in" /></a>
					</td>
				</tr>
				<TMPL_LOOP NAME=ZOOM_WIDGET>
					<tr>
						<td colspan="3">
							<a href="<TMPL_VAR NAME=URL>">
						<TMPL_IF NAME=SELECTED>
							<img src="<TMPL_VAR NAME=IMG_DIR>/zoom-level-selected.png" width="30" height="15" border="0" alt="Zoom level <TMPL_VAR NAME=LEVEL> (current)" />
						<TMPL_ELSE>
							<img src="<TMPL_VAR NAME=IMG_DIR>/zoom-level.png" width="30" height="15" border="0" alt="Zoom level <TMPL_VAR NAME=LEVEL>" />
						</TMPL_IF>
							</a>
						</td>
					</tr>
				</TMPL_LOOP>
				<tr>
					<td colspan="3" class="buttoncell">
						<a href="<TMPL_VAR NAME=ZOOM_OUT_URL>">
						<img src="<TMPL_VAR NAME=IMG_DIR>/zoom-minus.png" width="30" height="30" border="0" alt="Zoom out" />
						</a>
					</td>
				</tr>
			</table>
		</div>
		<div id="image">
			<form method="get" action="<TMPL_VAR NAME=SELF>" target="_self">

			<!-- for preserving state when the user clicks the map -->
			<input type="hidden" name="xoff" value="<TMPL_VAR NAME=XOFF>" />
			<input type="hidden" name="yoff" value="<TMPL_VAR NAME=YOFF>" />
			<input type="hidden" name="scale" value="<TMPL_VAR NAME=SCALE>" />
			<input type="hidden" name="size" value="<TMPL_VAR NAME=SIZE>" />
			<input type="hidden" name="mpm" value="<TMPL_VAR NAME=MPM>" />

			<input type="hidden" name="from" value="<TMPL_VAR NAME=TXT_SRC>" />
			<input type="hidden" name="to" value="<TMPL_VAR NAME=TXT_DST>" />

			<input type="image" name="map" id="map"
				src="<TMPL_VAR NAME=IMG_VIEW>" />
			</form>
		</div>
	</div>
</div>

<div id="right">

	<!-- display the thumbnail -->
	<form method="get" action="<TMPL_VAR NAME=SELF>" target="_self">

	<!-- for preserving state when the user clicks the thumbnail -->
	<input type="hidden" name="scale" value="<TMPL_VAR NAME=SCALE>" />
	<input type="hidden" name="size" value="<TMPL_VAR NAME=SIZE>" />
	<input type="hidden" name="mpm" value="<TMPL_VAR NAME=MPM>" />

	<input type="hidden" name="from" value="<TMPL_VAR NAME=TXT_SRC>" />
	<input type="hidden" name="to" value="<TMPL_VAR NAME=TXT_DST>" />

	<input type="image" name="thumb" id="thumb"
		src="<TMPL_VAR NAME=IMG_THUMB>" />
	</form>

	<TMPL_IF NAME=SRC_FOUND>
		<p><b>From</b>: <TMPL_VAR NAME=TXT_SRC></p>
	</TMPL_IF>
	<TMPL_IF NAME=DST_FOUND>
		<p><b>To</b>: <TMPL_VAR NAME=TXT_DST></p>
	</TMPL_IF>

	<TMPL_IF NAME=GOT_PATH>
		<p><b>Distance</b>: <TMPL_VAR NAME=DISTANCE> mi</p>
		<p><b>Time</b>: <TMPL_VAR NAME=TIME> min</p>

		<form method="get" action="<TMPL_VAR NAME=SELF>" target="_self">

			<input type="hidden" name="xoff" value="<TMPL_VAR NAME=XOFF>" />
			<input type="hidden" name="yoff" value="<TMPL_VAR NAME=YOFF>" />
			<input type="hidden" name="scale" value="<TMPL_VAR NAME=SCALE>" />
			<input type="hidden" name="size" value="<TMPL_VAR NAME=SIZE>" />
			<input type="hidden" name="from" value="<TMPL_VAR NAME=TXT_SRC>" />
			<input type="hidden" name="to" value="<TMPL_VAR NAME=TXT_DST>" />

			It takes me
			<input type="text" size="3" name="mpm" value="<TMPL_VAR NAME=MPM>" />
			minutes to walk one mile.

			<input type="submit" name="submit" value="Recalculate" />
		</form>

	</TMPL_IF>
	<TMPL_IF NAME=TXT_ERROR>
		<b><TMPL_VAR NAME=TXT_ERROR></b>
	</TMPL_IF>

	<!-- this is just for printing debug output... we can remove it once
	map.cgi is more stable. -->
	<TMPL_IF NAME=DEBUG>
		Debug: <TMPL_VAR NAME=DEBUG>
	</TMPL_IF>
</div>

<div id="bottom">
	<p>
		&copy; 2005
		<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#49;&#107;&#101;&#108;&#108;&#121;&#64;&#117;&#99;&#115;&#100;&#46;&#101;&#100;&#117;">Michael Kelly</a> and
		<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#100;&#108;&#105;&#110;&#100;&#113;&#117;&#105;&#64;&#117;&#99;&#115;&#100;&#46;&#101;&#100;&#117;">David Lindquist</a>,
		<code><TMPL_VAR NAME=CVS_ID></code>
	</p>
</div>

</body>
</html>
