<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/2000/REC-xhtml1-20000126/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>UCSDMap</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />

<style type="text/css">
	body{
		margin-top: 0px;
		margin-bottom: 0px;
		background: #339;
		font-family: arial, helvetica, sans-serif;
		font-size: 12px;
	}

	#container{
		width: 760px;
		margin: 0 auto;
		background: white;
		border: 5px solid white;
	}

	#header{
		width: 100%;
	}

	#headerLeft{
		width: 560px;
		float: left;
	}

	#headerMiddleTop{
		margin: 20px;
	}

	/* this is the logo */
	#headerLeftTop{
		margin-left: 10px;
		margin-bottom: 4px;
		margin-right: 20px;
		float: left;
	}

	#headerLeftBottom{
		text-align: left;
		clear: left;
	}

	/* this is the 'start' field */
	#headerLeftBottomLeft{
		float: left;
		margin-left: 30px;
		margin-right: 20px;
	}

	/* this is the submit button */
	#headerLeftBottomRight{
		float: right;
		vertical-align: middle;
		text-align: left;
		margin-right: 5px;
	}

	#headerRight{
		float: right;
		width: 190px;
	}

	#display{
		width: 100%;
		clear: both;
	}

	#displayLeft{
		float: left;
		width: 180px;
	}

	#displayMap{
		float: right;
		margin-top: 3px;
	}

	/* 
	 * Buttons for controlling zoom and direction...position is absolutely
	 * relative to map :)
	 */
	#buttons{
		float: left;
		width: 70px;
		margin-top: 20px;
		text-align: center;
	}
	
	#footer{
		clear: both;
		width: 100%;
		text-align: center;
		font-size: 75%;
	}

	#thumb{
		width: 145px;
		height: 130px;
	}
</style>

</head>
<body>

<div id="container">
	<div id="header">
		<div id="headerLeft">

			<div id="headerLeftTop">
				<img src="<TMPL_VAR NAME=IMG_DIR>/ucsdmaplogo_small.png"
					width="151" height="77" alt="ucsdmapLogo" />
			</div>

			<div id="headerMiddleTop">
				Enter a start and destination location to find the shortest path between the two, or select only one to zoom to that location.
			</div>

			<div id="headerLeftBottom">

				<!-- for input forms -->
				<form method="get" action="<TMPL_VAR NAME=SELF>" target="_self" name="main">
				<!-- remember zoom level and window size when searching --> 
				<input type="hidden" name="size" value="<TMPL_VAR NAME=SIZE>" />
				<input type="hidden" name="mpm" value="<TMPL_VAR NAME=MPM>" />

				<div id="headerLeftBottomLeft">
					<!-- 'start' location input -->
					<label for="from">Start:</label>
					<input id="from" type="text" name="from" value="<TMPL_VAR NAME=TXT_SRC>" />
					<br />
					<select name="from_selector"
						onchange="main.from.value = this.form.from_selector.value">
						<option value="">(None)</option>
						<TMPL_LOOP NAME=LOCATIONS>
							<option value="<TMPL_VAR NAME=NAME>" <TMPL_IF NAME=SELECTED_FROM>selected="selected"</TMPL_IF>><TMPL_VAR NAME=NAME></option>
						</TMPL_LOOP>
					</select>
				</div>
				<div id="headerLeftBottomRight">
					<!-- a lonely submit button, all by its lonesome -->
					<input type="submit" name="submit" value="Submit" />
				</div>

				<!-- 'end' location input -->
				<label for="to">End:</label>
				<input id="to" type="text" name="to" value="<TMPL_VAR NAME=TXT_DST>" />
				<br />
				<select name="to_selector"
					onchange="main.to.value = this.form.to_selector.value">
					<option value="">(None)</option>
					<TMPL_LOOP NAME=LOCATIONS>
						<option value="<TMPL_VAR NAME=NAME>" <TMPL_IF NAME=SELECTED_TO>selected="selected"</TMPL_IF>><TMPL_VAR NAME=NAME></option>
					</TMPL_LOOP>
				</select>

				</form>
				<!-- this ends the main input form -->

			</div>

		</div>

		<div id="headerRight">

			<!-- display the thumbnail -->
			<form method="get" action="<TMPL_VAR NAME=SELF>" target="_self">

			<!-- for preserving state when the user clicks the thumbnail -->
			<input type="hidden" name="scale" value="<TMPL_VAR NAME=SCALE>" />
			<input type="hidden" name="size" value="<TMPL_VAR NAME=SIZE>" />
			<input type="hidden" name="mpm" value="<TMPL_VAR NAME=MPM>" />

			<input type="hidden" name="from" value="<TMPL_VAR NAME=TXT_SRC>" />
			<input type="hidden" name="to" value="<TMPL_VAR NAME=TXT_DST>" />

			<input type="image" name="thumb" id="thumb"
				src="<TMPL_VAR NAME=IMG_THUMB>" />
			</form>
			<!-- end display of the thumbnail -->

		</div>

	</div>

	<div id="display">

		<div id="displayLeft">
			<!-- status text -->
			<TMPL_IF NAME=SRC_FOUND>
				<p><b>From</b>: <TMPL_VAR NAME=TXT_SRC></p>
			</TMPL_IF>
			<TMPL_IF NAME=DST_FOUND>
				<p><b>To</b>: <TMPL_VAR NAME=TXT_DST></p>
			</TMPL_IF>

			<TMPL_IF NAME=GOT_PATH>
				<p><b>Distance</b>: <TMPL_VAR NAME=DISTANCE> mi</p>
				<p><b>Time</b>: <TMPL_VAR NAME=TIME> min</p>

				<form method="get" action="<TMPL_VAR NAME=SELF>" target="_self">

					<input type="hidden" name="xoff" value="<TMPL_VAR NAME=XOFF>" />
					<input type="hidden" name="yoff" value="<TMPL_VAR NAME=YOFF>" />
					<input type="hidden" name="scale" value="<TMPL_VAR NAME=SCALE>" />
					<input type="hidden" name="size" value="<TMPL_VAR NAME=SIZE>" />
					<input type="hidden" name="from" value="<TMPL_VAR NAME=TXT_SRC>" />
					<input type="hidden" name="to" value="<TMPL_VAR NAME=TXT_DST>" />

					It takes me
					<input type="text" size="3" name="mpm" value="<TMPL_VAR NAME=MPM>" />
					minutes to walk one mile.

					<input type="submit" name="submit" value="Recalculate" />
				</form>

			</TMPL_IF>
			<TMPL_IF NAME=TXT_ERROR>
				<b><TMPL_VAR NAME=TXT_ERROR></b>
			</TMPL_IF>
			<!-- end status text -->

			<!-- if this is blank, don't screw up
			alignment...non-breaking space -->
			&nbsp;
		</div>

		<div id="buttons">
			<table border="0" cellspacing="0" cellpadding="0">
			<!-- this is the directional control pad -->
			<tr>
				<td>&nbsp;</td>
				<td><a href="<TMPL_VAR NAME=UP_URL>"><img src="<TMPL_VAR NAME=IMG_DIR>/up-arr.png" width="20" height="20" border="0" alt="Up" /></a></td>
				<td>&nbsp;</td>
			</tr>
			<tr>
				<td><a href="<TMPL_VAR NAME=LEFT_URL>"><img src="<TMPL_VAR NAME=IMG_DIR>/left-arr.png" width="20" height="20" border="0" alt="Left" /></a></td>
				<td><a href="<TMPL_VAR NAME=RECENTER_URL>"><img src="<TMPL_VAR NAME=IMG_DIR>/circle.png" width="20" height="20" border="0" alt="Re-center" /></a></td>
				<td><a href="<TMPL_VAR NAME=RIGHT_URL>"><img src="<TMPL_VAR NAME=IMG_DIR>/right-arr.png" width="20" height="20" border="0" alt="Right" /></a></td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td><a href="<TMPL_VAR NAME=DOWN_URL>"><img src="<TMPL_VAR NAME=IMG_DIR>/down-arr.png" width="20" height="20" border="0" alt="Down" /></a></td>
				<td>&nbsp;</td>
			</tr>
			<tr>
				<td colspan="3">&nbsp;</td>
			</tr>

			<!-- this is the zoom widget -->
			<tr>
				<td colspan="3"><a href="<TMPL_VAR NAME=ZOOM_IN_URL>"><img src="<TMPL_VAR NAME=IMG_DIR>/zoom-plus.png" width="30" height="30" border="0" alt="Zoom in" /></a></td>
			</tr>
			<tr>
				<!-- this is compressed to one line because
				whitespace messes up IE. expand it to make it
				comprehensible. as it stands, you are not
				expected to understand this ;) -->
				<td colspan="3"><TMPL_LOOP NAME=ZOOM_WIDGET><a href="<TMPL_VAR NAME=URL>"><TMPL_IF NAME=SELECTED><img src="<TMPL_VAR NAME=IMG_DIR>/zoom-level-selected.png" width="30" height="15" border="0" alt="Zoom level <TMPL_VAR NAME=LEVEL> (current)" /><TMPL_ELSE><img src="<TMPL_VAR NAME=IMG_DIR>/zoom-level.png" width="30" height="15" border="0" alt="Zoom level <TMPL_VAR NAME=LEVEL>" /></TMPL_IF></a><br /></TMPL_LOOP></td>
			</tr>
			<tr>
				<td colspan="3" class="buttoncell"><a href="<TMPL_VAR NAME=ZOOM_OUT_URL>"><img src="<TMPL_VAR NAME=IMG_DIR>/zoom-minus.png" width="30" height="30" border="0" alt="Zoom out" /></a></td>
			</tr>
			</table>
			<!-- end div buttons -->
		</div>

		<div id="displayMap">

			<!-- begin main image -->
			<form method="get" action="<TMPL_VAR NAME=SELF>" target="_self">
			<!-- for preserving state when the user clicks the map -->
			<input type="hidden" name="xoff" value="<TMPL_VAR NAME=XOFF>" />
			<input type="hidden" name="yoff" value="<TMPL_VAR NAME=YOFF>" />
			<input type="hidden" name="scale" value="<TMPL_VAR NAME=SCALE>" />
			<input type="hidden" name="size" value="<TMPL_VAR NAME=SIZE>" />
			<input type="hidden" name="mpm" value="<TMPL_VAR NAME=MPM>" />

			<input type="hidden" name="from" value="<TMPL_VAR NAME=TXT_SRC>" />
			<input type="hidden" name="to" value="<TMPL_VAR NAME=TXT_DST>" />

			<input type="image" name="map" id="map" border="1"
				src="<TMPL_VAR NAME=IMG_VIEW>" />
			</form>
			<!-- end main image -->

		</div>

	</div>

	<div id="footer">
		<p>
			&copy; 2005
			<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#49;&#107;&#101;&#108;&#108;&#121;&#64;&#117;&#99;&#115;&#100;&#46;&#101;&#100;&#117;">Michael Kelly</a> and
			<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#100;&#108;&#105;&#110;&#100;&#113;&#117;&#105;&#64;&#117;&#99;&#115;&#100;&#46;&#101;&#100;&#117;">David Lindquist</a>,
			<code><TMPL_VAR NAME=CVS_REVISION></code>
		</p>
	</div>
</div>

</body>
</html>

